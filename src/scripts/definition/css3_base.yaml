# Copyright Â© 2020 Fernando Porrino Serrano
# Third party software licenses can be found at /docs/credits/thirdparties.md

# This file is part of AutoCheck.

# AutoCheck is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# AutoCheck is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.

# You should have received a copy of the GNU Affero General Public License
# along with AutoCheck.  If not, see <https://www.gnu.org/licenses/>.

name: "DAM - M04 (UF1): CSS3 Assignment"

body:
  - connector:            
      type: "Html"        
      arguments: "--folder {$CURRENT_FOLDER} --file index.html"       
        
  - question: 
      description: "Checking index.html"                          
      content:                            

        - run:
            connector: "Html"
            command:  "ValidateHTML5AgainstW3C"
            caption:  "Validating document against the W3C validation service... "
            onexception: "SKIP"

        - question:                     
            description: "Validating inline CSS"
            content:                            
              - run:
                  caption:  "Checking for inline CSS entries... "
                  connector: "Html"
                  command:  "CountNodes"
                  arguments: "--xpath //style | //*[@style]"                  
                  expected: "=0"            

        - question:                     
            description: "Validating DIVs"
            content:                                          
              - run:
                  caption:  "Checking the amount of divs... "
                  connector: "Html"
                  command:  "CountNodes"
                  arguments: "--xpath //div"                  
                  expected: ">=1"

        - question:                     
            description: "Validating video"
            content:                            
              - run:
                  caption:  "Checking amount of video entries... "
                  connector: "Html"
                  command:  "CountNodes"
                  arguments: "--xpath //video | //iframe[@src] | //object[@data]"                  
                  expected: ">=1"                 
                  
  - connector:            
      type: "Css"        
      arguments: "--folder {$CURRENT_FOLDER} --file index.css" 

  - question: 
      description: "Checking index.css"                          
      content:                            
        - run:
            caption:  "Validating document against the W3C validation service... "
            connector: "Css"
            command:  "ValidateCSS3AgainstW3C"            
            onexception: "SKIP"
            
        - question:                     
            description: "Validating font property"
            content:                            
              - run:
                  caption:  "Checking if the font property has been created..."
                  connector: "Css"
                  command:  "PropertyExists"
                  arguments: "--property font"                  
                  expected: !!bool True

              - run:
                  caption:  "Checking if the font property has been applied..."
                  connector: "Css"
                  command:  "PropertyApplied"
                  arguments: 
                    htmlDoc: !!Connector "Html"
                    property: "font"
                  expected: !!bool False        


                  #TODO: continue