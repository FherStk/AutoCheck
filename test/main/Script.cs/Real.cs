/*
    Copyright Â© 2021 Fernando Porrino Serrano
    Third party software licenses can be found at /docs/credits/credits.md

    This file is part of AutoCheck.

    AutoCheck is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    AutoCheck is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with AutoCheck.  If not, see <https://www.gnu.org/licenses/>.
*/

using System.IO;
using NUnit.Framework;

namespace AutoCheck.Test
{    
    [Parallelizable(ParallelScope.All)]    
    public class Real : Test
    { 
        public Real(): base("script"){
        }        

#region Real script testing: XML Validation    
        [Test, Category("FullScriptXml"), Category("Real"), Category("Local")]    
        public void Real_XML_SCRIPT_SINGLE_1() 
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_xml_single_1.yaml"));
            Assert.AreEqual("Running script 'DAM - M04 (UF1): XML Validation Assignment (Namespaces + DTD + XSD)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 1':\r\n   Question 1 [4 points] - Starting validation over file1.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Checking amount of nodes... OK\r\n      Checking node types... OK\r\n      Checking amount of attributes... OK\r\n      Checking attribute types... OK\r\n      Checking repeated nodes... OK\r\n\r\n      Question 1.1 [4 points] - Starting validation over file1.dtd:\r\n         Looking for file1.dtd... OK\r\n         Looking for comments... OK\r\n\r\n         Question 1.1.1 [2 points] - Content validation:\r\n            Checking document's content... OK\r\n\r\n         Question 1.1.2 [2 points] - Comments validation:\r\n            Checking document's comments... OK\r\n\r\n   Question 2 [4 points] - Starting validation over file2.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Looking for file2.xml... OK\r\n      Loading file2.xml... OK\r\n      Checking that file1.xml and file2.xml are using the same hierarchy... OK\r\n\r\n      Question 2.1 [4 points] - Starting validation over file2.xsd:\r\n         Looking for file2.xsd... OK\r\n         Loading file2.xsd... OK\r\n         Looking for comments... OK\r\n\r\n         Question 2.1.1 [2 points] - Content validation:\r\n            Checking document's content... OK\r\n\r\n         Question 2.1.2 [2 points] - Comments validation:\r\n            Checking document's comments... OK\r\n\r\n   Question 3 [2 points] - Starting validation over file3.xml:\r\n      Looking for file3.xml... OK\r\n      Loading file3.xml... OK\r\n      Looking for comments... OK\r\n\r\n      Question 3.1 [1 point] - Content validation:\r\n         Checking for a default namespace... OK\r\n         Checking for a custom namespaces... OK\r\n         Checking for a root node with using the default namespace... OK\r\n         Checking for the amount of nodes using the first namespace... OK\r\n         Checking for the amount of nodes using the second namespace... OK\r\n\r\n      Question 3.2 [1 point] - Comments validation:\r\n         Checking document's comments... OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());
        } 

        [Test, Category("FullScriptXml"), Category("Real"), Category("Local")]    
        public void Real_XML_SCRIPT_SINGLE_2()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_xml_single_2.yaml"));                         
            Assert.AreEqual("Running script 'DAM - M04 (UF1): XML Validation Assignment (Namespaces + DTD + XSD)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 2':\r\n   Question 1 [4 points] - Starting validation over file1.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Checking amount of nodes... OK\r\n      Checking node types... OK\r\n      Checking amount of attributes... ERROR:\n         -Expected -> >=5; Found -> 3\r\n\r\n   Question 2 [4 points] - Starting validation over file2.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Looking for file2.xml... OK\r\n      Loading file2.xml... OK\r\n      Checking that file1.xml and file2.xml are using the same hierarchy... OK\r\n\r\n      Question 2.1 [4 points] - Starting validation over file2.xsd:\r\n         Looking for file2.xsd... OK\r\n         Loading file2.xsd... OK\r\n         Looking for comments... OK\r\n\r\n         Question 2.1.1 [2 points] - Content validation:\r\n            Checking document's content... OK\r\n\r\n         Question 2.1.2 [2 points] - Comments validation:\r\n            Checking document's comments... OK\r\n\r\n   Question 3 [2 points] - Starting validation over file3.xml:\r\n      Looking for file3.xml... OK\r\n      Loading file3.xml... OK\r\n      Looking for comments... OK\r\n\r\n      Question 3.1 [1 point] - Content validation:\r\n         Checking for a default namespace... OK\r\n         Checking for a custom namespaces... OK\r\n         Checking for a root node with using the default namespace... OK\r\n         Checking for the amount of nodes using the first namespace... ERROR:\n            -Expected -> =25; Found -> 24\r\n         Checking for the amount of nodes using the second namespace... ERROR:\n            -Expected -> =25; Found -> 24\r\n\r\n      Question 3.2 [1 point] - Comments validation:\r\n         Checking document's comments... OK\r\n\r\n   TOTAL SCORE: 5 / 10", s.Output.ToString());
        } 

        [Test, Category("FullScriptXml"), Category("Real"), Category("Local")]     
        public void Real_XML_SCRIPT_SINGLE_3()
        {              
            var s = new AutoCheck.Core.Script(GetSampleFile("real_xml_single_3.yaml"));                         
            Assert.AreEqual("Running script 'DAM - M04 (UF1): XML Validation Assignment (Namespaces + DTD + XSD)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 9':\r\n   Question 1 [4 points] - Starting validation over file1.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Checking amount of nodes... ERROR:\n         -Expected -> >=15; Found -> 13\r\n\r\n   Question 2 [4 points] - Starting validation over file2.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Looking for file2.xml... ERROR:\n         -Expected -> %file2.xml; Found -> NULL\r\n\r\n   Question 3 [2 points] - Starting validation over file3.xml:\r\n      Looking for file3.xml... ERROR:\n         -Expected -> %file3.xml; Found -> NULL\r\n\r\n   TOTAL SCORE: 0 / 10", s.Output.ToString());
        }  

        [Test, Category("FullScriptXml"), Category("Real"), Category("Local")]    
        public void Real_XML_SCRIPT_BATCH() 
        {                         
            var s = new AutoCheck.Core.Script(GetSampleFile("real_xml_batch.yaml"));                         
            Assert.AreEqual("Running script DAM - M04 (UF1): XML Validation Assignment (Namespaces + DTD + XSD) (v1.0.0.2):\r\n   Starting the copy detector for XML:\r\n      Looking for potential copies within Student Name 1... OK\r\n      Looking for potential copies within Student Name 2... OK\r\n      Looking for potential copies within Student Name 3... OK\r\n      Looking for potential copies within Student Name 4... OK\r\n      Looking for potential copies within Student Name 5... OK\r\n      Looking for potential copies within Student Name 6... OK\r\n      Looking for potential copies within Student Name 7... OK\r\n      Looking for potential copies within Student Name 8... OK\r\n      Looking for potential copies within Student Name 9... OK\r\n\r\nRunning on batch mode for Student Name 1:\r\n   Question 1 [4 points] - Starting validation over file1.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Checking amount of nodes... OK\r\n      Checking node types... OK\r\n      Checking amount of attributes... OK\r\n      Checking attribute types... OK\r\n      Checking repeated nodes... OK\r\n\r\n      Question 1.1 [4 points] - Starting validation over file1.dtd:\r\n         Looking for file1.dtd... OK\r\n         Looking for comments... OK\r\n\r\n         Question 1.1.1 [2 points] - Content validation:\r\n            Checking document's content... OK\r\n\r\n         Question 1.1.2 [2 points] - Comments validation:\r\n            Checking document's comments... OK\r\n\r\n   Question 2 [4 points] - Starting validation over file2.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Looking for file2.xml... OK\r\n      Loading file2.xml... OK\r\n      Checking that file1.xml and file2.xml are using the same hierarchy... OK\r\n\r\n      Question 2.1 [4 points] - Starting validation over file2.xsd:\r\n         Looking for file2.xsd... OK\r\n         Loading file2.xsd... OK\r\n         Looking for comments... OK\r\n\r\n         Question 2.1.1 [2 points] - Content validation:\r\n            Checking document's content... OK\r\n\r\n         Question 2.1.2 [2 points] - Comments validation:\r\n            Checking document's comments... OK\r\n\r\n   Question 3 [2 points] - Starting validation over file3.xml:\r\n      Looking for file3.xml... OK\r\n      Loading file3.xml... OK\r\n      Looking for comments... OK\r\n\r\n      Question 3.1 [1 point] - Content validation:\r\n         Checking for a default namespace... OK\r\n         Checking for a custom namespaces... OK\r\n         Checking for a root node with using the default namespace... OK\r\n         Checking for the amount of nodes using the first namespace... OK\r\n         Checking for the amount of nodes using the second namespace... OK\r\n\r\n      Question 3.2 [1 point] - Comments validation:\r\n         Checking document's comments... OK\r\n\r\n   TOTAL SCORE: 10 / 10\r\n\r\nRunning on batch mode for Student Name 2:\r\n   Question 1 [4 points] - Starting validation over file1.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Checking amount of nodes... OK\r\n      Checking node types... OK\r\n      Checking amount of attributes... ERROR:\n         -Expected -> >=5; Found -> 3\r\n\r\n   Question 2 [4 points] - Starting validation over file2.xml:\r\n      Looking for file1.xml... OK\r\n      Loading file1.xml... OK\r\n      Looking for file2.xml... OK\r\n      Loading file2.xml... OK\r\n      Checking that file1.xml and file2.xml are using the same hierarchy... OK\r\n\r\n      Question 2.1 [4 points] - Starting validation over file2.xsd:\r\n         Looking for file2.xsd... OK\r\n         Loading file2.xsd... OK\r\n         Looking for comments... OK\r\n\r\n         Question 2.1.1 [2 points] - Content validation:\r\n            Checking document's content... OK\r\n\r\n         Question 2.1.2 [2 points] - Comments validation:\r\n            Checking document's comments... OK\r\n\r\n   Question 3 [2 points] - Starting validation over file3.xml:\r\n      Looking for file3.xml... OK\r\n      Loading file3.xml... OK\r\n      Looking for comments... OK\r\n\r\n      Question 3.1 [1 point] - Content validation:\r\n         Checking for a default namespace... OK\r\n         Checking for a custom namespaces... OK\r\n         Checking for a root node with using the default namespace... OK\r\n         Checking for the amount of nodes using the first namespace... ERROR:\n            -Expected -> =25; Found -> 24\r\n         Checking for the amount of nodes using the second namespace... ERROR:\n            -Expected -> =25; Found -> 24\r\n\r\n      Question 3.2 [1 point] - Comments validation:\r\n         Checking document's comments... OK\r\n\r\n   TOTAL SCORE: 5 / 10\r\n\r\nRunning on batch mode for Student Name 3:\r\n   Potential copy detected for Student Name 3\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 33,13 % \r\n      Match score with Student Name 2\\file1.xml... 27,89 % \r\n      Match score with Student Name 4\\file1.xml... 100,00 % \r\n      Match score with Student Name 5\\file1.xml... 78,89 % \r\n      Match score with Student Name 6\\file1.xml... 77,78 % \r\n      Match score with Student Name 7\\file1.xml... 77,78 % \r\n      Match score with Student Name 8\\file1.xml... 77,78 % \r\n      Match score with Student Name 9\\file1.xml... 74,10 % \r\n\r\nRunning on batch mode for Student Name 4:\r\n   Potential copy detected for Student Name 4\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 33,13 % \r\n      Match score with Student Name 2\\file1.xml... 27,89 % \r\n      Match score with Student Name 3\\file1.xml... 100,00 % \r\n      Match score with Student Name 5\\file1.xml... 78,89 % \r\n      Match score with Student Name 6\\file1.xml... 77,78 % \r\n      Match score with Student Name 7\\file1.xml... 77,78 % \r\n      Match score with Student Name 8\\file1.xml... 77,78 % \r\n      Match score with Student Name 9\\file1.xml... 74,10 % \r\n\r\nRunning on batch mode for Student Name 5:\r\n   Potential copy detected for Student Name 5\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 33,13 % \r\n      Match score with Student Name 2\\file1.xml... 27,89 % \r\n      Match score with Student Name 3\\file1.xml... 78,89 % \r\n      Match score with Student Name 4\\file1.xml... 78,89 % \r\n      Match score with Student Name 6\\file1.xml... 94,44 % \r\n      Match score with Student Name 7\\file1.xml... 91,11 % \r\n      Match score with Student Name 8\\file1.xml... 91,11 % \r\n      Match score with Student Name 9\\file1.xml... 86,57 % \r\n\r\nRunning on batch mode for Student Name 6:\r\n   Potential copy detected for Student Name 6\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 33,13 % \r\n      Match score with Student Name 2\\file1.xml... 27,89 % \r\n      Match score with Student Name 3\\file1.xml... 77,78 % \r\n      Match score with Student Name 4\\file1.xml... 77,78 % \r\n      Match score with Student Name 5\\file1.xml... 94,44 % \r\n      Match score with Student Name 7\\file1.xml... 92,22 % \r\n      Match score with Student Name 8\\file1.xml... 91,11 % \r\n      Match score with Student Name 9\\file1.xml... 86,57 % \r\n\r\nRunning on batch mode for Student Name 7:\r\n   Potential copy detected for Student Name 7\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 33,13 % \r\n      Match score with Student Name 2\\file1.xml... 27,89 % \r\n      Match score with Student Name 3\\file1.xml... 77,78 % \r\n      Match score with Student Name 4\\file1.xml... 77,78 % \r\n      Match score with Student Name 5\\file1.xml... 91,11 % \r\n      Match score with Student Name 6\\file1.xml... 92,22 % \r\n      Match score with Student Name 8\\file1.xml... 94,44 % \r\n      Match score with Student Name 9\\file1.xml... 89,69 % \r\n\r\nRunning on batch mode for Student Name 8:\r\n   Potential copy detected for Student Name 8\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 33,13 % \r\n      Match score with Student Name 2\\file1.xml... 27,89 % \r\n      Match score with Student Name 3\\file1.xml... 77,78 % \r\n      Match score with Student Name 4\\file1.xml... 77,78 % \r\n      Match score with Student Name 5\\file1.xml... 91,11 % \r\n      Match score with Student Name 6\\file1.xml... 91,11 % \r\n      Match score with Student Name 7\\file1.xml... 94,44 % \r\n      Match score with Student Name 9\\file1.xml... 94,88 % \r\n\r\nRunning on batch mode for Student Name 9:\r\n   Potential copy detected for Student Name 9\\file1.xml:\r\n      Match score with Student Name 1\\file1.xml... 37,36 % \r\n      Match score with Student Name 2\\file1.xml... 31,24 % \r\n      Match score with Student Name 3\\file1.xml... 74,10 % \r\n      Match score with Student Name 4\\file1.xml... 74,10 % \r\n      Match score with Student Name 5\\file1.xml... 86,57 % \r\n      Match score with Student Name 6\\file1.xml... 86,57 % \r\n      Match score with Student Name 7\\file1.xml... 89,69 % \r\n      Match score with Student Name 8\\file1.xml... 94,88 %", s.Output.ToString());
        }  
#endregion
#region Real script testing: HTML5
        [Test, Category("FullScriptHtml5"), Category("Real"), Category("Local")]
        public void Real_HTML5_SCRIPT_SINGLE_1() 
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_html5_single_1.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF1): HTML5 Assignment' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 1':\r\n   Question 1 [4 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating headers:\r\n         Checking amount of level-1 headers... OK\r\n         Checking amount of level-2 headers... OK\r\n\r\n      Question 1.2 [1 point] - Validating paragraphs:\r\n         Checking amount of paragraphs... OK\r\n         Checking content legth within paragraphs... OK\r\n\r\n      Question 1.3 [1 point] - Validating breaklines:\r\n         Checking amount of breaklines within a paragraph... OK\r\n\r\n      Question 1.4 [1 point] - Validating images:\r\n         Checking amount of images... OK\r\n\r\n   Question 2 [12 points] - Checking contacte.html:\r\n      Looking for contacte.html... OK\r\n      Loading contacte.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating text fields:\r\n         Checking amount of text fields... OK\r\n\r\n      Question 2.2 [1 point] - Validating numeric fields:\r\n         Checking amount of numeric fields... OK\r\n\r\n      Question 2.3 [1 point] - Validating email fields:\r\n         Checking amount of email fields... OK\r\n\r\n      Question 2.4 [1 point] - Validating radio fields:\r\n         Checking amount of radio fields... OK\r\n         Checking group for the radio fields... OK\r\n         Checking the checked radio fields... OK\r\n\r\n      Question 2.5 [1 point] - Validating select fields:\r\n         Checking amount of select fields... OK\r\n         Checking select options... OK\r\n         Checking the selected option... OK\r\n\r\n      Question 2.6 [1 point] - Validating checkbox fields:\r\n         Checking amount of checkbox fields... OK\r\n         Checking group for the checkbox fields... OK\r\n         Checking the checked option... OK\r\n\r\n      Question 2.7 [1 point] - Validating textarea fields:\r\n         Checking amount of textarea fields... OK\r\n\r\n      Question 2.8 [1 point] - Validating placeholders:\r\n         Checking amount of placelhoders for text fields... OK\r\n         Checking amount of placelhoders for email fields... OK\r\n         Checking amount of placelhoders for numeric fields... OK\r\n         Checking amount of placelhoders for textarea fields... OK\r\n\r\n      Question 2.9 [1 point] - Validating labels:\r\n         Checking amount of labels for text fields... OK\r\n         Checking amount of labels for numeric fields... OK\r\n         Checking amount of labels for email fields... OK\r\n         Checking amount of labels for radio fields... OK\r\n         Checking amount of labels for select fields... OK\r\n         Checking amount of labels for check fields... OK\r\n         Checking amount of labels for textarea fields... OK\r\n\r\n      Question 2.10 [1 point] - Validating table:\r\n         Checking amount of columns... OK\r\n         Checking amount of merged columns... OK\r\n         Checking amount of labels within the first column... OK\r\n         Checking amount of labels within the second column... OK\r\n         Checking amount of labels within the third column... OK\r\n         Checking amount of labels within the fourth column... OK\r\n         Checking table's consistency... OK\r\n\r\n      Question 2.11 [1 point] - Validating form reset:\r\n         Checking amount of reset buttons... OK\r\n\r\n      Question 2.12 [1 point] - Validating form submit:\r\n         Checking amount of fields with no name... OK\r\n         Checking amount of submit buttons... OK\r\n         Checking form action... OK\r\n\r\n   Question 3 [2 points] - Checking menu (index.html):\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 3.1 [1 point] - Validating lists:\r\n         Checking amount of lists... OK\r\n         Checking amount of list items... OK\r\n\r\n      Question 3.2 [1 point] - Validating links:\r\n         Checking amount of links... OK\r\n         Checking links destination... OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());            
        }  

        [Test, Category("FullScriptHtml5"), Category("Real"), Category("Local")]
        public void Real_HTML5_SCRIPT_SINGLE_2()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_html5_single_2.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF1): HTML5 Assignment' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 2':\r\n   Question 1 [4 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Duplicate attribute alt.ht=\"333\"  alt=\"Cavs\">\r\n\r\n   Question 2 [12 points] - Checking contacte.html:\r\n      Looking for contacte.html... OK\r\n      Loading contacte.html... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Stray end tag label. teu nom\"></label></td>\r\n\r\n   Question 3 [2 points] - Checking menu (index.html):\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Duplicate attribute alt.ht=\"333\"  alt=\"Cavs\">\r\n\r\n   TOTAL SCORE: 0 / 10", s.Output.ToString());            
        }  

        [Test, Category("FullScriptHtml5"), Category("Real"), Category("Local")]
        public void Real_HTML5_SCRIPT_SINGLE_3()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_html5_single_3.yaml"));
            Assert.AreEqual("Running script 'DAM - M04 (UF1): HTML5 Assignment' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 3':\r\n   Question 1 [4 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating headers:\r\n         Checking amount of level-1 headers... OK\r\n         Checking amount of level-2 headers... OK\r\n\r\n      Question 1.2 [1 point] - Validating paragraphs:\r\n         Checking amount of paragraphs... OK\r\n         Checking content legth within paragraphs... OK\r\n\r\n      Question 1.3 [1 point] - Validating breaklines:\r\n         Checking amount of breaklines within a paragraph... OK\r\n\r\n      Question 1.4 [1 point] - Validating images:\r\n         Checking amount of images... OK\r\n\r\n   Question 2 [12 points] - Checking contacte.html:\r\n      Looking for contacte.html... OK\r\n      Loading contacte.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating text fields:\r\n         Checking amount of text fields... OK\r\n\r\n      Question 2.2 [1 point] - Validating numeric fields:\r\n         Checking amount of numeric fields... OK\r\n\r\n      Question 2.3 [1 point] - Validating email fields:\r\n         Checking amount of email fields... OK\r\n\r\n      Question 2.4 [1 point] - Validating radio fields:\r\n         Checking amount of radio fields... OK\r\n         Checking group for the radio fields... OK\r\n         Checking the checked radio fields... OK\r\n\r\n      Question 2.5 [1 point] - Validating select fields:\r\n         Checking amount of select fields... OK\r\n         Checking select options... OK\r\n         Checking the selected option... OK\r\n\r\n      Question 2.6 [1 point] - Validating checkbox fields:\r\n         Checking amount of checkbox fields... OK\r\n         Checking group for the checkbox fields... OK\r\n         Checking the checked option... OK\r\n\r\n      Question 2.7 [1 point] - Validating textarea fields:\r\n         Checking amount of textarea fields... OK\r\n\r\n      Question 2.8 [1 point] - Validating placeholders:\r\n         Checking amount of placelhoders for text fields... OK\r\n         Checking amount of placelhoders for email fields... OK\r\n         Checking amount of placelhoders for numeric fields... OK\r\n         Checking amount of placelhoders for textarea fields... OK\r\n\r\n      Question 2.9 [1 point] - Validating labels:\r\n         Checking amount of labels for text fields... OK\r\n         Checking amount of labels for numeric fields... OK\r\n         Checking amount of labels for email fields... OK\r\n         Checking amount of labels for radio fields... OK\r\n         Checking amount of labels for select fields... OK\r\n         Checking amount of labels for check fields... OK\r\n         Checking amount of labels for textarea fields... OK\r\n\r\n      Question 2.10 [1 point] - Validating table:\r\n         Checking amount of columns... OK\r\n         Checking amount of merged columns... OK\r\n         Checking amount of labels within the first column... OK\r\n         Checking amount of labels within the second column... OK\r\n         Checking amount of labels within the third column... OK\r\n         Checking amount of labels within the fourth column... OK\r\n         Checking table's consistency... OK\r\n\r\n      Question 2.11 [1 point] - Validating form reset:\r\n         Checking amount of reset buttons... OK\r\n\r\n      Question 2.12 [1 point] - Validating form submit:\r\n         Checking amount of fields with no name... OK\r\n         Checking amount of submit buttons... OK\r\n         Checking form action... OK\r\n\r\n   Question 3 [2 points] - Checking menu (index.html):\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 3.1 [1 point] - Validating lists:\r\n         Checking amount of lists... OK\r\n         Checking amount of list items... OK\r\n\r\n      Question 3.2 [1 point] - Validating links:\r\n         Checking amount of links... OK\r\n         Checking links destination... OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());            
        } 

        [Test, Category("FullScriptHtml5"), Category("Real"), Category("Local")]
        public void Real_HTML5_SCRIPT_BATCH()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_html5_batch.yaml"));
            var expected = "Running script DAM - M04 (UF1): HTML5 Assignment (v1.0.0.2):\r\n   Starting the copy detector for HTML:\r\n      Looking for potential copies within Student Name 1... OK\r\n      Looking for potential copies within Student Name 2... OK\r\n      Looking for potential copies within Student Name 3... OK\r\n\r\nRunning on batch mode for Student Name 1:\r\n   Question 1 [4 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating headers:\r\n         Checking amount of level-1 headers... OK\r\n         Checking amount of level-2 headers... OK\r\n\r\n      Question 1.2 [1 point] - Validating paragraphs:\r\n         Checking amount of paragraphs... OK\r\n         Checking content legth within paragraphs... OK\r\n\r\n      Question 1.3 [1 point] - Validating breaklines:\r\n         Checking amount of breaklines within a paragraph... OK\r\n\r\n      Question 1.4 [1 point] - Validating images:\r\n         Checking amount of images... OK\r\n\r\n   Question 2 [12 points] - Checking contacte.html:\r\n      Looking for contacte.html... OK\r\n      Loading contacte.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating text fields:\r\n         Checking amount of text fields... OK\r\n\r\n      Question 2.2 [1 point] - Validating numeric fields:\r\n         Checking amount of numeric fields... OK\r\n\r\n      Question 2.3 [1 point] - Validating email fields:\r\n         Checking amount of email fields... OK\r\n\r\n      Question 2.4 [1 point] - Validating radio fields:\r\n         Checking amount of radio fields... OK\r\n         Checking group for the radio fields... OK\r\n         Checking the checked radio fields... OK\r\n\r\n      Question 2.5 [1 point] - Validating select fields:\r\n         Checking amount of select fields... OK\r\n         Checking select options... OK\r\n         Checking the selected option... OK\r\n\r\n      Question 2.6 [1 point] - Validating checkbox fields:\r\n         Checking amount of checkbox fields... OK\r\n         Checking group for the checkbox fields... OK\r\n         Checking the checked option... OK\r\n\r\n      Question 2.7 [1 point] - Validating textarea fields:\r\n         Checking amount of textarea fields... OK\r\n\r\n      Question 2.8 [1 point] - Validating placeholders:\r\n         Checking amount of placelhoders for text fields... OK\r\n         Checking amount of placelhoders for email fields... OK\r\n         Checking amount of placelhoders for numeric fields... OK\r\n         Checking amount of placelhoders for textarea fields... OK\r\n\r\n      Question 2.9 [1 point] - Validating labels:\r\n         Checking amount of labels for text fields... OK\r\n         Checking amount of labels for numeric fields... OK\r\n         Checking amount of labels for email fields... OK\r\n         Checking amount of labels for radio fields... OK\r\n         Checking amount of labels for select fields... OK\r\n         Checking amount of labels for check fields... OK\r\n         Checking amount of labels for textarea fields... OK\r\n\r\n      Question 2.10 [1 point] - Validating table:\r\n         Checking amount of columns... OK\r\n         Checking amount of merged columns... OK\r\n         Checking amount of labels within the first column... OK\r\n         Checking amount of labels within the second column... OK\r\n         Checking amount of labels within the third column... OK\r\n         Checking amount of labels within the fourth column... OK\r\n         Checking table's consistency... OK\r\n\r\n      Question 2.11 [1 point] - Validating form reset:\r\n         Checking amount of reset buttons... OK\r\n\r\n      Question 2.12 [1 point] - Validating form submit:\r\n         Checking amount of fields with no name... OK\r\n         Checking amount of submit buttons... OK\r\n         Checking form action... OK\r\n\r\n   Question 3 [2 points] - Checking menu (index.html):\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 3.1 [1 point] - Validating lists:\r\n         Checking amount of lists... OK\r\n         Checking amount of list items... OK\r\n\r\n      Question 3.2 [1 point] - Validating links:\r\n         Checking amount of links... OK\r\n         Checking links destination... OK\r\n\r\n   TOTAL SCORE: 10 / 10\r\n\r\nRunning on batch mode for Student Name 2:\r\n   Question 1 [4 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Duplicate attribute alt.ht=\"333\"  alt=\"Cavs\">\r\n\r\n   Question 2 [12 points] - Checking contacte.html:\r\n      Looking for contacte.html... OK\r\n      Loading contacte.html... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Stray end tag label. teu nom\"></label></td>\r\n\r\n   Question 3 [2 points] - Checking menu (index.html):\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Duplicate attribute alt.ht=\"333\"  alt=\"Cavs\">\r\n\r\n   TOTAL SCORE: 0 / 10\r\n\r\nRunning on batch mode for Student Name 3:\r\n   Question 1 [4 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating headers:\r\n         Checking amount of level-1 headers... OK\r\n         Checking amount of level-2 headers... OK\r\n\r\n      Question 1.2 [1 point] - Validating paragraphs:\r\n         Checking amount of paragraphs... OK\r\n         Checking content legth within paragraphs... OK\r\n\r\n      Question 1.3 [1 point] - Validating breaklines:\r\n         Checking amount of breaklines within a paragraph... OK\r\n\r\n      Question 1.4 [1 point] - Validating images:\r\n         Checking amount of images... OK\r\n\r\n   Question 2 [12 points] - Checking contacte.html:\r\n      Looking for contacte.html... OK\r\n      Loading contacte.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating text fields:\r\n         Checking amount of text fields... OK\r\n\r\n      Question 2.2 [1 point] - Validating numeric fields:\r\n         Checking amount of numeric fields... OK\r\n\r\n      Question 2.3 [1 point] - Validating email fields:\r\n         Checking amount of email fields... OK\r\n\r\n      Question 2.4 [1 point] - Validating radio fields:\r\n         Checking amount of radio fields... OK\r\n         Checking group for the radio fields... OK\r\n         Checking the checked radio fields... OK\r\n\r\n      Question 2.5 [1 point] - Validating select fields:\r\n         Checking amount of select fields... OK\r\n         Checking select options... OK\r\n         Checking the selected option... OK\r\n\r\n      Question 2.6 [1 point] - Validating checkbox fields:\r\n         Checking amount of checkbox fields... OK\r\n         Checking group for the checkbox fields... OK\r\n         Checking the checked option... OK\r\n\r\n      Question 2.7 [1 point] - Validating textarea fields:\r\n         Checking amount of textarea fields... OK\r\n\r\n      Question 2.8 [1 point] - Validating placeholders:\r\n         Checking amount of placelhoders for text fields... OK\r\n         Checking amount of placelhoders for email fields... OK\r\n         Checking amount of placelhoders for numeric fields... OK\r\n         Checking amount of placelhoders for textarea fields... OK\r\n\r\n      Question 2.9 [1 point] - Validating labels:\r\n         Checking amount of labels for text fields... OK\r\n         Checking amount of labels for numeric fields... OK\r\n         Checking amount of labels for email fields... OK\r\n         Checking amount of labels for radio fields... OK\r\n         Checking amount of labels for select fields... OK\r\n         Checking amount of labels for check fields... OK\r\n         Checking amount of labels for textarea fields... OK\r\n\r\n      Question 2.10 [1 point] - Validating table:\r\n         Checking amount of columns... OK\r\n         Checking amount of merged columns... OK\r\n         Checking amount of labels within the first column... OK\r\n         Checking amount of labels within the second column... OK\r\n         Checking amount of labels within the third column... OK\r\n         Checking amount of labels within the fourth column... OK\r\n         Checking table's consistency... OK\r\n\r\n      Question 2.11 [1 point] - Validating form reset:\r\n         Checking amount of reset buttons... OK\r\n\r\n      Question 2.12 [1 point] - Validating form submit:\r\n         Checking amount of fields with no name... OK\r\n         Checking amount of submit buttons... OK\r\n         Checking form action... OK\r\n\r\n   Question 3 [2 points] - Checking menu (index.html):\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 3.1 [1 point] - Validating lists:\r\n         Checking amount of lists... OK\r\n         Checking amount of list items... OK\r\n\r\n      Question 3.2 [1 point] - Validating links:\r\n         Checking amount of links... OK\r\n         Checking links destination... OK\r\n\r\n   TOTAL SCORE: 10 / 10";
            Assert.AreEqual(expected, s.Output.ToString());
        } 
#endregion
#region Real script testing: CSS3
        [Test, Category("FullScriptCss3"), Category("Real"), Category("Local")]
        public void Real_CSS3_SCRIPT_SINGLE_1()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_css3_single_1.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF1): CSS3 Assignment' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 1':\r\n   Question 1 [3 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating inline CSS:\r\n         Checking for inline CSS entries... OK\r\n\r\n      Question 1.2 [1 point] - Validating DIVs:\r\n         Checking the amount of divs... OK\r\n\r\n      Question 1.3 [1 point] - Validating video:\r\n         Checking amount of video entries... ERROR:\n            -Expected -> >=1; Found -> 0\r\n\r\n   Question 2 [14 points] - Checking index.css:\r\n      Looking for index.css... OK\r\n      Loading index.css... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating font property:\r\n         Checking if the font property has been created... OK\r\n         Checking if the font property has been applied... OK\r\n\r\n      Question 2.2 [1 point] - Validating border property:\r\n         Checking if the border property has been created... OK\r\n         Checking if the border property has been applied... OK\r\n\r\n      Question 2.3 [1 point] - Validating text property:\r\n         Checking if the text property has been created... OK\r\n         Checking if the text property has been applied... OK\r\n\r\n      Question 2.4 [1 point] - Validating color property:\r\n         Checking if the color property has been created... OK\r\n         Checking if the color property has been applied... OK\r\n\r\n      Question 2.5 [1 point] - Validating background property:\r\n         Checking if the background property has been created... OK\r\n         Checking if the background property has been applied... OK\r\n\r\n      Question 2.6 [1 point] - Validating position:absolute property:\r\n         Checking if the position:absolute property has been created... OK\r\n         Checking if the position:absolute property has been applied... OK\r\n\r\n      Question 2.7 [1 point] - Validating position:relative property:\r\n         Checking if the position:relative property has been created... OK\r\n         Checking if the position:relative property has been applied... OK\r\n\r\n      Question 2.8 [1 point] - Validating clear property:\r\n         Checking if the clear property has been created... OK\r\n         Checking if the clear property has been applied... OK\r\n\r\n      Question 2.9 [1 point] - Validating clear property:\r\n         Checking if the width property has been created... OK\r\n         Checking if the width property has been applied... OK\r\n\r\n      Question 2.10 [1 point] - Validating height property:\r\n         Checking if the height property has been created... OK\r\n         Checking if the height property has been applied... OK\r\n\r\n      Question 2.11 [1 point] - Validating margin property:\r\n         Checking if the margin property has been created... OK\r\n         Checking if the margin property has been applied... OK\r\n\r\n      Question 2.12 [1 point] - Validating padding property:\r\n         Checking if the padding property has been created... OK\r\n         Checking if the padding property has been applied... OK\r\n\r\n      Question 2.13 [1 point] - Validating list property:\r\n         Checking if the list property has been created... OK\r\n         Checking if the list property has been applied... OK\r\n\r\n      Question 2.14 [1 point] - Validating (top | right | bottom | left) property:\r\n         Checking if the (top | right | bottom | left) property has been created... OK\r\n         Checking if the (top | right | bottom | left) property has been applied... OK\r\n\r\n   TOTAL SCORE: 9.41 / 10", s.Output.ToString());
        }

        [Test, Category("FullScriptCss3"), Category("Real"), Category("Local")]
        public void Real_CSS3_SCRIPT_SINGLE_2()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_css3_single_2.yaml"));
            Assert.AreEqual("Running script 'DAM - M04 (UF1): CSS3 Assignment' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 2':\r\n   Question 1 [3 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating inline CSS:\r\n         Checking for inline CSS entries... OK\r\n\r\n      Question 1.2 [1 point] - Validating DIVs:\r\n         Checking the amount of divs... OK\r\n\r\n      Question 1.3 [1 point] - Validating video:\r\n         Checking amount of video entries... OK\r\n\r\n   Question 2 [14 points] - Checking index.css:\r\n      Looking for index.css... OK\r\n      Loading index.css... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating font property:\r\n         Checking if the font property has been created... OK\r\n         Checking if the font property has been applied... OK\r\n\r\n      Question 2.2 [1 point] - Validating border property:\r\n         Checking if the border property has been created... OK\r\n         Checking if the border property has been applied... OK\r\n\r\n      Question 2.3 [1 point] - Validating text property:\r\n         Checking if the text property has been created... OK\r\n         Checking if the text property has been applied... OK\r\n\r\n      Question 2.4 [1 point] - Validating color property:\r\n         Checking if the color property has been created... OK\r\n         Checking if the color property has been applied... OK\r\n\r\n      Question 2.5 [1 point] - Validating background property:\r\n         Checking if the background property has been created... OK\r\n         Checking if the background property has been applied... OK\r\n\r\n      Question 2.6 [1 point] - Validating position:absolute property:\r\n         Checking if the position:absolute property has been created... OK\r\n         Checking if the position:absolute property has been applied... OK\r\n\r\n      Question 2.7 [1 point] - Validating position:relative property:\r\n         Checking if the position:relative property has been created... OK\r\n         Checking if the position:relative property has been applied... OK\r\n\r\n      Question 2.8 [1 point] - Validating clear property:\r\n         Checking if the clear property has been created... OK\r\n         Checking if the clear property has been applied... OK\r\n\r\n      Question 2.9 [1 point] - Validating clear property:\r\n         Checking if the width property has been created... OK\r\n         Checking if the width property has been applied... OK\r\n\r\n      Question 2.10 [1 point] - Validating height property:\r\n         Checking if the height property has been created... OK\r\n         Checking if the height property has been applied... OK\r\n\r\n      Question 2.11 [1 point] - Validating margin property:\r\n         Checking if the margin property has been created... OK\r\n         Checking if the margin property has been applied... OK\r\n\r\n      Question 2.12 [1 point] - Validating padding property:\r\n         Checking if the padding property has been created... OK\r\n         Checking if the padding property has been applied... OK\r\n\r\n      Question 2.13 [1 point] - Validating list property:\r\n         Checking if the list property has been created... OK\r\n         Checking if the list property has been applied... OK\r\n\r\n      Question 2.14 [1 point] - Validating (top | right | bottom | left) property:\r\n         Checking if the (top | right | bottom | left) property has been created... OK\r\n         Checking if the (top | right | bottom | left) property has been applied... OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());
        }

        [Test, Category("FullScriptCss3"), Category("Real"), Category("Local")]
        public void Real_CSS3_SCRIPT_SINGLE_3()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_css3_single_3.yaml"));
            Assert.AreEqual("Running script 'DAM - M04 (UF1): CSS3 Assignment' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 3':\r\n   Question 1 [3 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating inline CSS:\r\n         Checking for inline CSS entries... OK\r\n\r\n      Question 1.2 [1 point] - Validating DIVs:\r\n         Checking the amount of divs... OK\r\n\r\n      Question 1.3 [1 point] - Validating video:\r\n         Checking amount of video entries... OK\r\n\r\n   Question 2 [14 points] - Checking index.css:\r\n      Looking for index.css... OK\r\n      Loading index.css... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating font property:\r\n         Checking if the font property has been created... OK\r\n         Checking if the font property has been applied... OK\r\n\r\n      Question 2.2 [1 point] - Validating border property:\r\n         Checking if the border property has been created... OK\r\n         Checking if the border property has been applied... OK\r\n\r\n      Question 2.3 [1 point] - Validating text property:\r\n         Checking if the text property has been created... OK\r\n         Checking if the text property has been applied... OK\r\n\r\n      Question 2.4 [1 point] - Validating color property:\r\n         Checking if the color property has been created... OK\r\n         Checking if the color property has been applied... OK\r\n\r\n      Question 2.5 [1 point] - Validating background property:\r\n         Checking if the background property has been created... OK\r\n         Checking if the background property has been applied... OK\r\n\r\n      Question 2.6 [1 point] - Validating position:absolute property:\r\n         Checking if the position:absolute property has been created... OK\r\n         Checking if the position:absolute property has been applied... OK\r\n\r\n      Question 2.7 [1 point] - Validating position:relative property:\r\n         Checking if the position:relative property has been created... OK\r\n         Checking if the position:relative property has been applied... OK\r\n\r\n      Question 2.8 [1 point] - Validating clear property:\r\n         Checking if the clear property has been created... OK\r\n         Checking if the clear property has been applied... OK\r\n\r\n      Question 2.9 [1 point] - Validating clear property:\r\n         Checking if the width property has been created... OK\r\n         Checking if the width property has been applied... OK\r\n\r\n      Question 2.10 [1 point] - Validating height property:\r\n         Checking if the height property has been created... OK\r\n         Checking if the height property has been applied... OK\r\n\r\n      Question 2.11 [1 point] - Validating margin property:\r\n         Checking if the margin property has been created... OK\r\n         Checking if the margin property has been applied... OK\r\n\r\n      Question 2.12 [1 point] - Validating padding property:\r\n         Checking if the padding property has been created... OK\r\n         Checking if the padding property has been applied... OK\r\n\r\n      Question 2.13 [1 point] - Validating list property:\r\n         Checking if the list property has been created... OK\r\n         Checking if the list property has been applied... OK\r\n\r\n      Question 2.14 [1 point] - Validating (top | right | bottom | left) property:\r\n         Checking if the (top | right | bottom | left) property has been created... OK\r\n         Checking if the (top | right | bottom | left) property has been applied... OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());
        }

        [Test, Category("FullScriptCss3"), Category("Real"), Category("Local")]
        public void Real_CSS3_SCRIPT_BATCH()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_css3_batch.yaml"));
            var expected = "Running script DAM - M04 (UF1): CSS3 Assignment (v1.0.0.2):\r\nRunning on batch mode for Student Name 1:\r\n   Question 1 [3 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating inline CSS:\r\n         Checking for inline CSS entries... OK\r\n\r\n      Question 1.2 [1 point] - Validating DIVs:\r\n         Checking the amount of divs... OK\r\n\r\n      Question 1.3 [1 point] - Validating video:\r\n         Checking amount of video entries... ERROR:\n            -Expected -> >=1; Found -> 0\r\n\r\n   Question 2 [14 points] - Checking index.css:\r\n      Looking for index.css... OK\r\n      Loading index.css... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating font property:\r\n         Checking if the font property has been created... OK\r\n         Checking if the font property has been applied... OK\r\n\r\n      Question 2.2 [1 point] - Validating border property:\r\n         Checking if the border property has been created... OK\r\n         Checking if the border property has been applied... OK\r\n\r\n      Question 2.3 [1 point] - Validating text property:\r\n         Checking if the text property has been created... OK\r\n         Checking if the text property has been applied... OK\r\n\r\n      Question 2.4 [1 point] - Validating color property:\r\n         Checking if the color property has been created... OK\r\n         Checking if the color property has been applied... OK\r\n\r\n      Question 2.5 [1 point] - Validating background property:\r\n         Checking if the background property has been created... OK\r\n         Checking if the background property has been applied... OK\r\n\r\n      Question 2.6 [1 point] - Validating position:absolute property:\r\n         Checking if the position:absolute property has been created... OK\r\n         Checking if the position:absolute property has been applied... OK\r\n\r\n      Question 2.7 [1 point] - Validating position:relative property:\r\n         Checking if the position:relative property has been created... OK\r\n         Checking if the position:relative property has been applied... OK\r\n\r\n      Question 2.8 [1 point] - Validating clear property:\r\n         Checking if the clear property has been created... OK\r\n         Checking if the clear property has been applied... OK\r\n\r\n      Question 2.9 [1 point] - Validating clear property:\r\n         Checking if the width property has been created... OK\r\n         Checking if the width property has been applied... OK\r\n\r\n      Question 2.10 [1 point] - Validating height property:\r\n         Checking if the height property has been created... OK\r\n         Checking if the height property has been applied... OK\r\n\r\n      Question 2.11 [1 point] - Validating margin property:\r\n         Checking if the margin property has been created... OK\r\n         Checking if the margin property has been applied... OK\r\n\r\n      Question 2.12 [1 point] - Validating padding property:\r\n         Checking if the padding property has been created... OK\r\n         Checking if the padding property has been applied... OK\r\n\r\n      Question 2.13 [1 point] - Validating list property:\r\n         Checking if the list property has been created... OK\r\n         Checking if the list property has been applied... OK\r\n\r\n      Question 2.14 [1 point] - Validating (top | right | bottom | left) property:\r\n         Checking if the (top | right | bottom | left) property has been created... OK\r\n         Checking if the (top | right | bottom | left) property has been applied... OK\r\n\r\n   TOTAL SCORE: 9.41 / 10\r\n\r\nRunning on batch mode for Student Name 2:\r\n   Question 1 [3 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating inline CSS:\r\n         Checking for inline CSS entries... OK\r\n\r\n      Question 1.2 [1 point] - Validating DIVs:\r\n         Checking the amount of divs... OK\r\n\r\n      Question 1.3 [1 point] - Validating video:\r\n         Checking amount of video entries... OK\r\n\r\n   Question 2 [14 points] - Checking index.css:\r\n      Looking for index.css... OK\r\n      Loading index.css... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating font property:\r\n         Checking if the font property has been created... OK\r\n         Checking if the font property has been applied... OK\r\n\r\n      Question 2.2 [1 point] - Validating border property:\r\n         Checking if the border property has been created... OK\r\n         Checking if the border property has been applied... OK\r\n\r\n      Question 2.3 [1 point] - Validating text property:\r\n         Checking if the text property has been created... OK\r\n         Checking if the text property has been applied... OK\r\n\r\n      Question 2.4 [1 point] - Validating color property:\r\n         Checking if the color property has been created... OK\r\n         Checking if the color property has been applied... OK\r\n\r\n      Question 2.5 [1 point] - Validating background property:\r\n         Checking if the background property has been created... OK\r\n         Checking if the background property has been applied... OK\r\n\r\n      Question 2.6 [1 point] - Validating position:absolute property:\r\n         Checking if the position:absolute property has been created... OK\r\n         Checking if the position:absolute property has been applied... OK\r\n\r\n      Question 2.7 [1 point] - Validating position:relative property:\r\n         Checking if the position:relative property has been created... OK\r\n         Checking if the position:relative property has been applied... OK\r\n\r\n      Question 2.8 [1 point] - Validating clear property:\r\n         Checking if the clear property has been created... OK\r\n         Checking if the clear property has been applied... OK\r\n\r\n      Question 2.9 [1 point] - Validating clear property:\r\n         Checking if the width property has been created... OK\r\n         Checking if the width property has been applied... OK\r\n\r\n      Question 2.10 [1 point] - Validating height property:\r\n         Checking if the height property has been created... OK\r\n         Checking if the height property has been applied... OK\r\n\r\n      Question 2.11 [1 point] - Validating margin property:\r\n         Checking if the margin property has been created... OK\r\n         Checking if the margin property has been applied... OK\r\n\r\n      Question 2.12 [1 point] - Validating padding property:\r\n         Checking if the padding property has been created... OK\r\n         Checking if the padding property has been applied... OK\r\n\r\n      Question 2.13 [1 point] - Validating list property:\r\n         Checking if the list property has been created... OK\r\n         Checking if the list property has been applied... OK\r\n\r\n      Question 2.14 [1 point] - Validating (top | right | bottom | left) property:\r\n         Checking if the (top | right | bottom | left) property has been created... OK\r\n         Checking if the (top | right | bottom | left) property has been applied... OK\r\n\r\n   TOTAL SCORE: 10 / 10\r\n\r\nRunning on batch mode for Student Name 3:\r\n   Question 1 [3 points] - Checking index.html:\r\n      Looking for index.html... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [1 point] - Validating inline CSS:\r\n         Checking for inline CSS entries... OK\r\n\r\n      Question 1.2 [1 point] - Validating DIVs:\r\n         Checking the amount of divs... OK\r\n\r\n      Question 1.3 [1 point] - Validating video:\r\n         Checking amount of video entries... OK\r\n\r\n   Question 2 [14 points] - Checking index.css:\r\n      Looking for index.css... OK\r\n      Loading index.css... OK\r\n      Loading index.html... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [1 point] - Validating font property:\r\n         Checking if the font property has been created... OK\r\n         Checking if the font property has been applied... OK\r\n\r\n      Question 2.2 [1 point] - Validating border property:\r\n         Checking if the border property has been created... OK\r\n         Checking if the border property has been applied... OK\r\n\r\n      Question 2.3 [1 point] - Validating text property:\r\n         Checking if the text property has been created... OK\r\n         Checking if the text property has been applied... OK\r\n\r\n      Question 2.4 [1 point] - Validating color property:\r\n         Checking if the color property has been created... OK\r\n         Checking if the color property has been applied... OK\r\n\r\n      Question 2.5 [1 point] - Validating background property:\r\n         Checking if the background property has been created... OK\r\n         Checking if the background property has been applied... OK\r\n\r\n      Question 2.6 [1 point] - Validating position:absolute property:\r\n         Checking if the position:absolute property has been created... OK\r\n         Checking if the position:absolute property has been applied... OK\r\n\r\n      Question 2.7 [1 point] - Validating position:relative property:\r\n         Checking if the position:relative property has been created... OK\r\n         Checking if the position:relative property has been applied... OK\r\n\r\n      Question 2.8 [1 point] - Validating clear property:\r\n         Checking if the clear property has been created... OK\r\n         Checking if the clear property has been applied... OK\r\n\r\n      Question 2.9 [1 point] - Validating clear property:\r\n         Checking if the width property has been created... OK\r\n         Checking if the width property has been applied... OK\r\n\r\n      Question 2.10 [1 point] - Validating height property:\r\n         Checking if the height property has been created... OK\r\n         Checking if the height property has been applied... OK\r\n\r\n      Question 2.11 [1 point] - Validating margin property:\r\n         Checking if the margin property has been created... OK\r\n         Checking if the margin property has been applied... OK\r\n\r\n      Question 2.12 [1 point] - Validating padding property:\r\n         Checking if the padding property has been created... OK\r\n         Checking if the padding property has been applied... OK\r\n\r\n      Question 2.13 [1 point] - Validating list property:\r\n         Checking if the list property has been created... OK\r\n         Checking if the list property has been applied... OK\r\n\r\n      Question 2.14 [1 point] - Validating (top | right | bottom | left) property:\r\n         Checking if the (top | right | bottom | left) property has been created... OK\r\n         Checking if the (top | right | bottom | left) property has been applied... OK\r\n\r\n   TOTAL SCORE: 10 / 10";
            Assert.AreEqual(expected, s.Output.ToString());
        }
#endregion
#region Real script testing: WEB Syndication
        [Test, Category("FullScriptWebSyndication"), Category("Real"), Category("Local")]
        public void Real_WEB_SYNDICATION_SCRIPT_SINGLE_1()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_web_syndication_single_1.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF2): Web Syndication (RSS + Atom)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 1':\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [0.15 points] - Validating rss tag:\r\n         Checking amount of rss tags... OK\r\n\r\n      Question 1.2 [0.15 points] - Validating channel tag:\r\n         Checking amount of channel tags... OK\r\n\r\n      Question 1.3 [0.15 points] - Validating item tag:\r\n         Checking amount of items... OK\r\n\r\n      Question 1.4 [0.15 points] - Validating title (within channel) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.5 [0.15 points] - Validating title (within item) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.6 [0.15 points] - Validating description (within channel) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.7 [0.15 points] - Validating description (within item) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.8 [0.15 points] - Validating link (within channel) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.9 [0.15 points] - Validating link (within item) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.10 [0.15 points] - Validating pubdate (within channel) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.11 [0.15 points] - Validating pubdate (within item) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.12 [0.15 points] - Validating guid (within item) tag:\r\n         Checking amount of guids... OK\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... OK\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... OK\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 3.45 / 3.45", s.Output.ToString());
        }

        [Test, Category("FullScriptWebSyndication"), Category("Real"), Category("Local")]
        public void Real_WEB_SYNDICATION_SCRIPT_SINGLE_2()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_web_syndication_single_2.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF2): Web Syndication (RSS + Atom)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 2':\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [0.15 points] - Validating rss tag:\r\n         Checking amount of rss tags... OK\r\n\r\n      Question 1.2 [0.15 points] - Validating channel tag:\r\n         Checking amount of channel tags... OK\r\n\r\n      Question 1.3 [0.15 points] - Validating item tag:\r\n         Checking amount of items... ERROR:\n            -Expected -> >=3; Found -> 2\r\n\r\n      Question 1.4 [0.15 points] - Validating title (within channel) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.5 [0.15 points] - Validating title (within item) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.6 [0.15 points] - Validating description (within channel) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.7 [0.15 points] - Validating description (within item) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.8 [0.15 points] - Validating link (within channel) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.9 [0.15 points] - Validating link (within item) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.10 [0.15 points] - Validating pubdate (within channel) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.11 [0.15 points] - Validating pubdate (within item) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.12 [0.15 points] - Validating guid (within item) tag:\r\n         Checking amount of guids... OK\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... OK\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... OK\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 3.3 / 3.45", s.Output.ToString());
        }

        [Test, Category("FullScriptWebSyndication"), Category("Real"), Category("Local")]
        public void Real_WEB_SYNDICATION_SCRIPT_SINGLE_3()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_web_syndication_single_3.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF2): Web Syndication (RSS + Atom)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 3':\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [0.15 points] - Validating rss tag:\r\n         Checking amount of rss tags... OK\r\n\r\n      Question 1.2 [0.15 points] - Validating channel tag:\r\n         Checking amount of channel tags... OK\r\n\r\n      Question 1.3 [0.15 points] - Validating item tag:\r\n         Checking amount of items... OK\r\n\r\n      Question 1.4 [0.15 points] - Validating title (within channel) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.5 [0.15 points] - Validating title (within item) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.6 [0.15 points] - Validating description (within channel) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.7 [0.15 points] - Validating description (within item) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.8 [0.15 points] - Validating link (within channel) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.9 [0.15 points] - Validating link (within item) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.10 [0.15 points] - Validating pubdate (within channel) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.11 [0.15 points] - Validating pubdate (within item) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.12 [0.15 points] - Validating guid (within item) tag:\r\n         Checking amount of guids... OK\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... OK\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... ERROR:\n            -Expected -> =1; Found -> 0\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 3.3 / 3.45", s.Output.ToString());
        }

        [Test, Category("FullScriptWebSyndication"), Category("Real"), Category("Local")]
        public void Real_WEB_SYNDICATION_SCRIPT_SINGLE_4()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_web_syndication_single_4.yaml"));                        
            Assert.AreEqual("Running script 'DAM - M04 (UF2): Web Syndication (RSS + Atom)' (v1.0.0.2):\r\nRunning on single mode for 'Student Name 4':\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Exception of type 'AutoCheck.Core.Exceptions.DocumentInvalidException' was thrown.\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... ERROR:\n            -Expected -> >=3; Found -> 2\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... OK\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 1.5 / 3.45", s.Output.ToString());
        }

        [Test, Category("FullScriptWebSyndication"), Category("Real"), Category("Local")]
        public void Real_WEB_SYNDICATION_SCRIPT_BATCH()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_web_syndication_batch.yaml"));                        
            var expected = "Running script DAM - M04 (UF2): Web Syndication (RSS + Atom) (v1.0.0.2):\r\nRunning on batch mode for Student Name 1:\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [0.15 points] - Validating rss tag:\r\n         Checking amount of rss tags... OK\r\n\r\n      Question 1.2 [0.15 points] - Validating channel tag:\r\n         Checking amount of channel tags... OK\r\n\r\n      Question 1.3 [0.15 points] - Validating item tag:\r\n         Checking amount of items... OK\r\n\r\n      Question 1.4 [0.15 points] - Validating title (within channel) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.5 [0.15 points] - Validating title (within item) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.6 [0.15 points] - Validating description (within channel) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.7 [0.15 points] - Validating description (within item) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.8 [0.15 points] - Validating link (within channel) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.9 [0.15 points] - Validating link (within item) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.10 [0.15 points] - Validating pubdate (within channel) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.11 [0.15 points] - Validating pubdate (within item) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.12 [0.15 points] - Validating guid (within item) tag:\r\n         Checking amount of guids... OK\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... OK\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... OK\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 3.45 / 3.45\r\n\r\nRunning on batch mode for Student Name 2:\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [0.15 points] - Validating rss tag:\r\n         Checking amount of rss tags... OK\r\n\r\n      Question 1.2 [0.15 points] - Validating channel tag:\r\n         Checking amount of channel tags... OK\r\n\r\n      Question 1.3 [0.15 points] - Validating item tag:\r\n         Checking amount of items... ERROR:\n            -Expected -> >=3; Found -> 2\r\n\r\n      Question 1.4 [0.15 points] - Validating title (within channel) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.5 [0.15 points] - Validating title (within item) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.6 [0.15 points] - Validating description (within channel) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.7 [0.15 points] - Validating description (within item) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.8 [0.15 points] - Validating link (within channel) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.9 [0.15 points] - Validating link (within item) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.10 [0.15 points] - Validating pubdate (within channel) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.11 [0.15 points] - Validating pubdate (within item) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.12 [0.15 points] - Validating guid (within item) tag:\r\n         Checking amount of guids... OK\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... OK\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... OK\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 3.3 / 3.45\r\n\r\nRunning on batch mode for Student Name 3:\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 1.1 [0.15 points] - Validating rss tag:\r\n         Checking amount of rss tags... OK\r\n\r\n      Question 1.2 [0.15 points] - Validating channel tag:\r\n         Checking amount of channel tags... OK\r\n\r\n      Question 1.3 [0.15 points] - Validating item tag:\r\n         Checking amount of items... OK\r\n\r\n      Question 1.4 [0.15 points] - Validating title (within channel) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.5 [0.15 points] - Validating title (within item) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 1.6 [0.15 points] - Validating description (within channel) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.7 [0.15 points] - Validating description (within item) tag:\r\n         Checking amount of descriptions... OK\r\n\r\n      Question 1.8 [0.15 points] - Validating link (within channel) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.9 [0.15 points] - Validating link (within item) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 1.10 [0.15 points] - Validating pubdate (within channel) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.11 [0.15 points] - Validating pubdate (within item) tag:\r\n         Checking amount of pubdates... OK\r\n\r\n      Question 1.12 [0.15 points] - Validating guid (within item) tag:\r\n         Checking amount of guids... OK\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... OK\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... ERROR:\n            -Expected -> =1; Found -> 0\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 3.3 / 3.45\r\n\r\nRunning on batch mode for Student Name 4:\r\n   Question 1 [1.8 points] - Checking document.rss:\r\n      Looking for document.rss... OK\r\n      Loading document.rss... OK\r\n      Validating document against the W3C validation service... ERROR:\n         -Exception of type 'AutoCheck.Core.Exceptions.DocumentInvalidException' was thrown.\r\n\r\n   Question 2 [1.65 points] - Checking document.atom:\r\n      Looking for document.atom... OK\r\n      Loading document.atom... OK\r\n      Validating document against the W3C validation service... OK\r\n\r\n      Question 2.1 [0.15 points] - Validating feed tag:\r\n         Checking amount of feed tags... OK\r\n\r\n      Question 2.2 [0.15 points] - Validating entry tag:\r\n         Checking amount of entries... ERROR:\n            -Expected -> >=3; Found -> 2\r\n\r\n      Question 2.3 [0.15 points] - Validating title (within feed) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.4 [0.15 points] - Validating title (within entry) tag:\r\n         Checking amount of titles... OK\r\n\r\n      Question 2.5 [0.15 points] - Validating subtitle (within feed) tag:\r\n         Checking amount of subtitles... OK\r\n\r\n      Question 2.6 [0.15 points] - Validating summary (within entry) tag:\r\n         Checking amount of summaries... OK\r\n\r\n      Question 2.7 [0.15 points] - Validating link (within feed) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.8 [0.15 points] - Validating link (within entry) tag:\r\n         Checking amount of links... OK\r\n\r\n      Question 2.9 [0.15 points] - Validating updated (within feed) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.10 [0.15 points] - Validating updated (within entry) tag:\r\n         Checking amount of updateds... OK\r\n\r\n      Question 2.11 [0.15 points] - Validating id (within entry) tag:\r\n         Checking amount of ids... OK\r\n\r\n   TOTAL SCORE: 1.5 / 3.45";
            Assert.AreEqual(expected, s.Output.ToString());
        }
#endregion
#region Permissions
        [NonParallelizable] //cannot interfear with the batch one, shares users and roles
        [Test, Category("FullScriptPermissions"), Category("Real"), Category("Local")]
        public void Real_PERMISSIONS_SCRIPT_SINGLE_1()
        {
            //TODO: the SQL script should create also users and restore the privileges.

            //Note: cannot be splitted or parallelized, must be done sequentualy because users and roles are shared alog the postgres instance.
            var conn = new AutoCheck.Core.Connectors.Postgres("localhost", "empresa", "postgres", "postgres");
            if(!conn.ExistsDataBase()) conn.CreateDataBase();

            //Restoring users and roles
            if(!conn.ExistsUser("it")) conn.CreateUser("it", "it");
            else conn.DropUserMembership("it");

            if(!conn.ExistsRole("rrhhadmin")) conn.CreateRole("rrhhadmin");
            else conn.DropRoleMembership("rrhhadmin");

            if(!conn.ExistsRole("prodadmin")) conn.CreateRole("prodadmin");
            else conn.DropRoleMembership("prodadmin");

            if(!conn.ExistsRole("dbadmin")) conn.CreateRole("dbadmin");
            else conn.DropRoleMembership("dbadmin");               
            
            //Restoring database
            var privatePath = Path.Combine(SamplesRootFolder, "private", "permissions");
            conn.CreateDataBase(Path.Combine(privatePath, "restore.sql"), true);

            //Original status
            var sample = GetSampleFile("real_permissions_single_1.yaml");
            var s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...ERROR:\n         -Expected -> True; Found -> False\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...ERROR:\n         -Expected -> >0; Found -> 0\r\n      Checking table privileges...ERROR:\n         -Expected -> %a%; Found -> rwdDxt\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking foreign key 'fabricacio -> productes'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> arwdDt\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> rwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 0 / 10", s.Output.ToString());

            //Solve question 2 (question 1 does not score)
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex2.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...ERROR:\n         -Expected -> True; Found -> False\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...ERROR:\n         -Expected -> >0; Found -> 0\r\n      Checking table privileges...ERROR:\n         -Expected -> %a%; Found -> rwdDxt\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking foreign key 'fabricacio -> productes'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> arwdDt\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> rwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 1 / 10", s.Output.ToString());

            //Solve question 3
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex3.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...ERROR:\n         -Expected -> >0; Found -> 0\r\n      Checking table privileges...ERROR:\n         -Expected -> %a%; Found -> rwdDxt\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking foreign key 'fabricacio -> productes'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> arwdDt\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> rwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 2 / 10", s.Output.ToString());

            //Solve question 4
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex4.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking foreign key 'fabricacio -> productes'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> arwdDt\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 3 / 10", s.Output.ToString());

            //Solve question 6 (question 5 does not score)
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex6.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...OK\r\n      Checking foreign key 'fabricacio -> productes'...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 4 / 10", s.Output.ToString());

            //Solve question 7
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex7.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...OK\r\n      Checking foreign key 'fabricacio -> productes'...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...OK\r\n      Checking schema privileges...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 6 / 10", s.Output.ToString());
            
            //Solve question 8
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex8.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...OK\r\n      Checking foreign key 'fabricacio -> productes'...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...OK\r\n      Checking schema privileges...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...OK\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...OK\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...OK\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...OK\r\n      Checking 'prodadmin' privileges for the table 'productes'...OK\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...OK\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 7 / 10", s.Output.ToString());
            
            //Solve question 9
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex9.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\nRunning on single mode:\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...OK\r\n      Checking foreign key 'fabricacio -> productes'...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...OK\r\n      Checking schema privileges...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...OK\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...OK\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...OK\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...OK\r\n      Checking 'prodadmin' privileges for the table 'productes'...OK\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...OK\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...OK\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...OK\r\n         Checking 'dbadmin' privileges for the table 'departaments'...OK\r\n         Checking 'dbadmin' privileges for the table 'fabriques'...OK\r\n         Checking 'dbadmin' privileges for the table 'productes'...OK\r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());            
        }

        [NonParallelizable] //cannot interfear with the single one, shares users and roles
        [Test, Category("FullScriptPermissions"), Category("Real"), Category("Local")]
        public void Real_PERMISSIONS_SCRIPT_BATCH_1()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_permissions_batch_1.yaml"));     
            var expected = "Running script ASIX - M02 (UF3): Permissions Assignment (v1.2.0.0):\r\n   Extracting files at: User_Folder_1\r\n      Extracting the file var.zip... OK\r\n\r\n   Extracting files at: User_Folder_2\r\n      Extracting the file NULL... OK\r\n\r\n   Extracting files at: User_Folder_3\r\n      Extracting the file NULL... OK\r\n\r\n   Starting the copy detector for SqlLog:\r\n      Looking for potential copies within User_Folder_1... OK\r\n      Looking for potential copies within User_Folder_2... OK\r\n      Looking for potential copies within User_Folder_3... OK\r\n\r\nRunning on batch mode for User_Folder_1:\r\n   Restoring BBDD permissions.\r\n      Dropping role rrhhadmin... OK\r\n      Dropping role prodadmin... OK\r\n      Dropping role dbadmin... OK\r\n      Dropping user it... OK\r\n      Creating user it... OK\r\n      Creating role rrhhadmin... OK\r\n      Creating role prodadmin... OK\r\n      Creating role dbadmin... OK\r\n\r\n   Importing SQL dump.\r\n      Restoring database using the file: empresa_Alejandro_Mallen.sql... OK\r\n\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...OK\r\n      Checking foreign key 'fabricacio -> productes'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking table privileges...OK\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 3 / 10\r\n\r\nRunning on batch mode for User_Folder_2:\r\n   Restoring BBDD permissions.\r\n      Dropping role rrhhadmin... OK\r\n      Dropping role prodadmin... OK\r\n      Dropping role dbadmin... OK\r\n      Dropping user it... OK\r\n      Creating user it... OK\r\n      Creating role rrhhadmin... OK\r\n      Creating role prodadmin... OK\r\n      Creating role dbadmin... OK\r\n\r\n   Importing SQL dump.\r\n      Restoring database using the file: empresa_pratik_Examen_Patel.sql... OK\r\n\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...OK\r\n      Checking foreign key 'fabricacio -> productes'...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...OK\r\n      Checking schema privileges...OK\r\n      Checking table privileges...OK\r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...OK\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...OK\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...OK\r\n      Checking 'prodadmin' privileges for the table 'productes'...OK\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...OK\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 6 / 10\r\n\r\nRunning on batch mode for User_Folder_3:\r\n   Restoring BBDD permissions.\r\n      Dropping role rrhhadmin... OK\r\n      Dropping role prodadmin... OK\r\n      Dropping role dbadmin... OK\r\n      Dropping user it... OK\r\n      Creating user it... OK\r\n      Creating role rrhhadmin... OK\r\n      Creating role prodadmin... OK\r\n      Creating role dbadmin... OK\r\n\r\n   Importing SQL dump.\r\n      Restoring database using the file: empresa_Aure_Gonzales.sql... OK\r\n\r\n   Question 1 [0 points] - This questions does not score:\r\n\r\n   Question 2 [1 point] - Foreign key (I):\r\n      Checking foreign key 'empleats -> empleats'...OK\r\n\r\n   Question 3 [1 point] - Foreign key (II):\r\n      Checking foreign key 'empleats -> departaments'...OK\r\n\r\n   Question 4 [1 point] - Privileges over 'empleats':\r\n      Checking new entries...ERROR:\n         -Expected -> >0; Found -> 0\r\n      Checking table privileges...ERROR:\n         -Expected -> %a%; Found -> rwdDxt\r\n\r\n   Question 5 [0 points] - This questions does not score:\r\n\r\n   Question 6 [1 point] - Privileges over 'fabricacio':\r\n      Checking foreign key 'fabricacio -> fabriques'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking foreign key 'fabricacio -> productes'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> arwdDt\r\n\r\n   Question 7 [2 points] - Privileges over 'fabriques':\r\n      Checking foreign key 'fabriques -> empleats'...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking schema privileges...ERROR:\n         -Expected -> %U%; Found -> \r\n      Checking table privileges...ERROR:\n         -Expected -> %x%; Found -> \r\n\r\n   Question 8 [1 point] - Privileges for rrhhadmin and prodadmin:\r\n      Checking removed entries...ERROR:\n         -Expected -> 0; Found -> 1\r\n      Checking 'rrhhadmin' privileges for the table 'empleats'...ERROR:\n         -Expected -> arwxt; Found -> rwdDxt\r\n      Checking 'rrhhadmin' privileges for the table 'departaments'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'fabriques'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n      Checking 'prodadmin' privileges for the table 'productes'...ERROR:\n         -Expected -> arwxt; Found -> arwdDt\r\n      Checking 'prodadmin' privileges for the table 'fabricacio'...ERROR:\n         -Expected -> arwxt; Found -> arwdDxt\r\n\r\n   Question 9 [3 points] - Privileges for dbadmin:\r\n\r\n      Question 9.1 [1 point] - Role membership:\r\n         Checking dbadmin membership...ERROR:\n            -Expected -> [prodadmin,rrhhadmin]; Found -> []\r\n\r\n      Question 9.2 [2 points] - Role privileges:\r\n         Checking 'dbadmin' privileges for the table 'empleats'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'departaments'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabriques'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'productes'...ERROR:\n            -Expected -> dD; Found -> \r\n         Checking 'dbadmin' privileges for the table 'fabricacio'...ERROR:\n            -Expected -> dD; Found -> \r\n\r\n   TOTAL SCORE: 2 / 10";
            Assert.AreEqual(expected, s.Output.ToString());

        }
#endregion
#region Views
        [NonParallelizable] //cannot interfear with the batch one, shares users and roles
        [Test, Category("FullScriptViews"), Category("Real"), Category("Local")]
        public void Real_VIEWS_SCRIPT_SINGLE_1()
        {
            //TODO: the SQL script should create also users and restore the privileges.

            //Note: cannot be splitted or parallelized, must be done sequentualy because users and roles are shared alog the postgres instance.
            var conn = new AutoCheck.Core.Connectors.Postgres("localhost", "empresa", "postgres", "postgres");
            if(!conn.ExistsDataBase()) conn.CreateDataBase();

            //Restoring users
            if(!conn.ExistsUser("it")) conn.CreateUser("it", "it");
            else conn.DropUserMembership("it");           
            
            //Restoring database
            var privatePath = Path.Combine(SamplesRootFolder, "private", "views");
            conn.CreateDataBase(Path.Combine(privatePath, "restore.sql"), true);

            //Original status
            var sample = GetSampleFile("real_views_single_1.yaml");
            var s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...ERROR:\n         -Expected -> True; Found -> False\r\n      Checking view definition...ERROR:\n         -Value cannot be null. (Parameter 'compared')\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...ERROR:\n         -Unable to run te given SQL query 'INSERT INTO gerencia.responsables (nom_fabrica, nom_responsable, cognoms_responsable) VALUES ('NEW FACTORY NAME 4', 'NEW EMPLOYEE NAME 10', 'NEW EMPLOYEE SURNAME 10')'. Please, check the inner exception for further details. \r\n         ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'SELECT COUNT(id_responsable) FROM gerencia.responsables WHERE id_responsable=10 AND nom_responsable='NEW EMPLOYEE NAME 10' AND cognoms_responsable='NEW EMPLOYEE SURNAME 10''. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for new content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'SELECT COUNT(id_fabrica) FROM gerencia.responsables WHERE id_fabrica=4 AND nom_fabrica='NEW FACTORY NAME 4''. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for new content in produccio.fabrique...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_responsable='UPDATED EMPLOYEE NAME 10', cognoms_responsable='UPDATED EMPLOYEE SURNAME 10' WHERE id_responsable=10'. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'SELECT COUNT(id_responsable) FROM gerencia.responsables WHERE id_responsable=10 AND nom_responsable='UPDATED EMPLOYEE NAME 10' AND cognoms_responsable='UPDATED EMPLOYEE SURNAME 10''. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_fabrica='UPDATED FACTORY NAME 4' WHERE id_fabrica=4'. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'SELECT COUNT(id_fabrica) FROM gerencia.responsables WHERE id_fabrica=4 AND nom_fabrica='UPDATED FACTORY NAME 4''. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=11'. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'SELECT COUNT(id_responsable) FROM gerencia.responsables WHERE id_fabrica=5'. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=5'. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'SELECT COUNT(id_fabrica) FROM gerencia.responsables WHERE id_fabrica=5'. Please, check the inner exception for further details. \r\n            ---> 42P01: no existe la relaciÃ³n Â«gerencia.responsablesÂ»\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 0 / 10", s.Output.ToString());

            //Solve question 1
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex1.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...ERROR:\n         -Unable to run te given SQL query 'INSERT INTO gerencia.responsables (nom_fabrica, nom_responsable, cognoms_responsable) VALUES ('NEW FACTORY NAME 6', 'NEW EMPLOYEE NAME 12', 'NEW EMPLOYEE SURNAME 12')'. Please, check the inner exception for further details. \r\n         ---> 55000: no se puede insertar en la vista Â«responsablesÂ»\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for new content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for new content in produccio.fabrique...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_responsable='UPDATED EMPLOYEE NAME 12', cognoms_responsable='UPDATED EMPLOYEE SURNAME 12' WHERE id_responsable=12'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede actualizar la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_fabrica='UPDATED FACTORY NAME 6' WHERE id_fabrica=6'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede actualizar la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=13'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=7'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 2 / 10", s.Output.ToString());

            //Solve question 2
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex2.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_responsable='UPDATED EMPLOYEE NAME 15', cognoms_responsable='UPDATED EMPLOYEE SURNAME 15' WHERE id_responsable=15'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede actualizar la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_fabrica='UPDATED FACTORY NAME 9' WHERE id_fabrica=9'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede actualizar la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=16'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=10'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 4 / 10", s.Output.ToString());

            //Solve question 3
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex3.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in rrhh.empleats...OK\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=19'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=13'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 6 / 10", s.Output.ToString());

            //Trying to solve the exercise removing the employee data
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex4_delete_v1.sql"));
            s = new AutoCheck.Core.Script(sample);
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in rrhh.empleats...OK\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=22'. Please, check the inner exception for further details. \r\n            ---> 23503: update o delete en Â«empleatsÂ» viola la llave forÃ¡nea Â«fabriques_id_responsable_fkeyÂ» en la tabla Â«fabriquesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=16'. Please, check the inner exception for further details. \r\n            ---> 23503: update o delete en Â«empleatsÂ» viola la llave forÃ¡nea Â«fabriques_id_responsable_fkeyÂ» en la tabla Â«fabriquesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 6 / 10", s.Output.ToString());

            //Trying to solve the exercise removing the factory data
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex4_delete_v2.sql"));
            s = new AutoCheck.Core.Script(sample);
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in rrhh.empleats...OK\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in from gerencia.responsables...OK\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...OK\r\n         Checking for non-deleted content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 6 / 10", s.Output.ToString());
                        
            //Solve question 4
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex4.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in rrhh.empleats...OK\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in from gerencia.responsables...OK\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...OK\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 9 / 10", s.Output.ToString());

            //Solve question 5
            conn.ImportSqlDump(Path.Combine(privatePath, "solve_ex5.sql"));
            s = new AutoCheck.Core.Script(sample);                        
            Assert.AreEqual("Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\nRunning on single mode:\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in rrhh.empleats...OK\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in from gerencia.responsables...OK\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...OK\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...OK\r\n      Looking for permissions into the schema gerencia...OK\r\n\r\n   TOTAL SCORE: 10 / 10", s.Output.ToString());
        }       

        [NonParallelizable] //cannot interfear with the single one, shares users and roles
        [Test, Category("FullScriptViews"), Category("Real"), Category("Local")]
        public void Real_VIEWS_SCRIPT_BATCH_1()
        {             
            var s = new AutoCheck.Core.Script(GetSampleFile("real_views_batch_1.yaml"));     
            var expected = "Running script ASIX - M02 (UF3): Views Assignment (v1.1.1.0):\r\n   Extracting files at: User_Folder_1\r\n      Extracting the file var.zip... OK\r\n\r\n   Extracting files at: User_Folder_2\r\n      Extracting the file NULL... OK\r\n\r\n   Extracting files at: User_Folder_3\r\n      Extracting the file NULL... OK\r\n\r\n   Starting the copy detector for SqlLog:\r\n      Looking for potential copies within User_Folder_1... OK\r\n      Looking for potential copies within User_Folder_2... OK\r\n      Looking for potential copies within User_Folder_3... OK\r\n\r\nRunning on batch mode for User_Folder_1:\r\n   Restoring BBDD permissions.\r\n      Dropping user it... OK\r\n      Creating user it... OK\r\n\r\n   Importing SQL dump.\r\n      Restoring database using the file: empresa_Rodrigo_Aguilar.sql... OK\r\n\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_responsable='UPDATED EMPLOYEE NAME 53', cognoms_responsable='UPDATED EMPLOYEE SURNAME 53' WHERE id_responsable=53'. Please, check the inner exception for further details. \r\n            ---> 42P17: se detectÃ³ recursiÃ³n infinita en las reglas de la relaciÃ³n Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_fabrica='UPDATED FACTORY NAME 57' WHERE id_fabrica=57'. Please, check the inner exception for further details. \r\n            ---> 42P17: se detectÃ³ recursiÃ³n infinita en las reglas de la relaciÃ³n Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=54'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=58'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...OK\r\n      Looking for permissions into the schema gerencia...OK\r\n\r\n   TOTAL SCORE: 5 / 10\r\n\r\nRunning on batch mode for User_Folder_2:\r\n   Restoring BBDD permissions.\r\n      Dropping user it... OK\r\n      Creating user it... OK\r\n\r\n   Importing SQL dump.\r\n      Restoring database using the file: empresa_Pratik_Patel.sql... OK\r\n\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...OK\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 2\r\n         Checking for new content in rrhh.empleats...OK\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...OK\r\n         Checking for new content in produccio.fabrique...OK\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in rrhh.empleats...OK\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...OK\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in from gerencia.responsables...OK\r\n         Checking for non-deleted content in from rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...OK\r\n         Checking for updated content in gerencia.responsables...OK\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...OK\r\n      Looking for permissions into the schema gerencia...OK\r\n\r\n   TOTAL SCORE: 6 / 10\r\n\r\nRunning on batch mode for User_Folder_3:\r\n   Restoring BBDD permissions.\r\n      Dropping user it... OK\r\n      Creating user it... OK\r\n\r\n   Importing SQL dump.\r\n      Restoring database using the file: empresa_Sergi_Camarasa.sql... OK\r\n\r\n   Question 1 [2 points] - View creation:\r\n      Checking view creation...OK\r\n      Checking view definition...OK\r\n\r\n   Question 2 [2 points] - Insert rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into gerencia.responsables...ERROR:\n         -Unable to run te given SQL query 'INSERT INTO gerencia.responsables (nom_fabrica, nom_responsable, cognoms_responsable) VALUES ('NEW FACTORY NAME 8', 'NEW EMPLOYEE NAME 14', 'NEW EMPLOYEE SURNAME 14')'. Please, check the inner exception for further details. \r\n         ---> 55000: no se puede insertar en la vista Â«responsablesÂ»\r\n\r\n      Question 2.1 [1 point] - Insert rule (empleats):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for new content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 2.2 [1 point] - Insert rule (fabriques):\r\n         Checking for new content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for new content in produccio.fabrique...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 3 [2 points] - Update rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 3.1 [1 point] - Update rule (empleats):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_responsable='UPDATED EMPLOYEE NAME 14', cognoms_responsable='UPDATED EMPLOYEE SURNAME 14' WHERE id_responsable=14'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede actualizar la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in rrhh.empleats...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n      Question 3.2 [1 point] - Update rule (fabriques):\r\n         Updating data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'UPDATE gerencia.responsables SET nom_fabrica='UPDATED FACTORY NAME 8' WHERE id_fabrica=8'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede actualizar la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 1; Found -> 0\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 4 [3 points] - Delete rule:\r\n      Loading demo data for produccio.fabriques...OK\r\n      Loading demo data for rrhh.empleats...OK\r\n      Inserting demo data into rrhh.empleats...OK\r\n      Inserting demo data into produccio.fabriques...OK\r\n\r\n      Question 4.1 [2 points] - Delete rule (empleats):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_responsable=15'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in from gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in from rrhh.empleats...OK\r\n         Checking for updated content in from produccio.fabriques...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for non-deleted content in produccio.fabriques...OK\r\n\r\n      Question 4.2 [1 point] - Delete rule (fabriques):\r\n         Deleting data from gerencia.responsables...ERROR:\n            -Unable to run te given SQL query 'DELETE FROM gerencia.responsables WHERE id_fabrica=9'. Please, check the inner exception for further details. \r\n            ---> 55000: no se puede eliminar de la vista Â«responsablesÂ»\r\n         Checking for updated content in gerencia.responsables...ERROR:\n            -Expected -> 0; Found -> 1\r\n         Checking for updated content in produccio.fabriques...ERROR:\n            -Expected -> 1; Found -> 0\r\n\r\n   Question 5 [1 point] - Permissions:\r\n      Looking for permissions into the view gerencia.responsables...ERROR:\n         -Expected -> r; Found -> \r\n      Looking for permissions into the schema gerencia...ERROR:\n         -Expected -> U; Found -> \r\n\r\n   TOTAL SCORE: 2 / 10";
            Assert.AreEqual(expected, s.Output.ToString());
        }
#endregion
    }
}